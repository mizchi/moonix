// Generated by moon-component
// Import module: wasi:random/insecure@0.2.9

///| Low-level FFI import
fn ffi_get_insecure_random_bytes(p0 : Int64, retptr : Int) -> Int = "wasi:random/insecure@0.2.9" "get-insecure-random-bytes"

///| High-level wrapper with canonical ABI conversion
pub fn get_insecure_random_bytes(len : UInt64) -> Array[Byte] {
  let retptr = @cabi.cabi_realloc(0, 0, 4, 8)
  let _ = ffi_get_insecure_random_bytes(len.reinterpret_as_int64(), retptr)
  let result_ptr = @cabi.cabi_read_i32(retptr)
  let result_len = @cabi.cabi_read_i32(retptr + 4)
  let result : Array[Byte] = {
    let arr : Array[Byte] = Array::new(capacity=result_len)
    for i = 0; i < result_len; i = i + 1 {
      let elem_ptr = result_ptr + i * 1
      arr.push(@cabi.cabi_read_u8(elem_ptr))
    }
    arr
  }
  result
}

///|
pub fn get_insecure_random_u64() -> UInt64 = "wasi:random/insecure@0.2.9" "get-insecure-random-u64"

